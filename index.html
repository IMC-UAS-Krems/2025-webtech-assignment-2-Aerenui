<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
<!--    <link rel="preload" as="image" href="img/not_found.png">-->
    <link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> Shop </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link href="css/style.css" rel="stylesheet">
</head>
<body>
<!-- <div  id="components" style="display: none"> -->
    <template>
        <!-- BASIC COMPONENTS -->
        <div id="container"> <div class="container"> % </div> </div>
        <div id="greet"> <h1>Hello %! </h1> </div>
        <div id="box"> <div class="container border border-2"> % </div> </div>

        <!-- SHOPPING PAGE COMPONENTS -->

        <!-- from bootstrap icons -->
        <div id="basket-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-basket-fill" viewBox="0 0 16 16">
                <path d="M5.071 1.243a.5.5 0 0 1 .858.514L3.383 6h9.234L10.07 1.757a.5.5 0 1 1 .858-.514L13.783 6H15.5a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5H15v5a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9H.5a.5.5 0 0 1-.5-.5v-2A.5.5 0 0 1 .5 6h1.717zM3.5 10.5a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0zm2.5 0a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0zm2.5 0a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0zm2.5 0a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0zm2.5 0a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0z"/>
            </svg>
        </div>

        <div id="modal-checkout-btn">
            <!-- data-bs-dismiss="modal" -->
            <p data-bs-dismiss="modal" style="display: contents">
                <button type="button" class="btn btn-primary %"  onclick="action_checkout_proceed();">Checkout</button>
            </p>
        </div>

        <div id="modal-item">
            <div class="d-flex justify-content-between pe-2 ps-2">
                <div class=""> % % <!-- NAME --> </div>
                <div class=""> %€ <!-- PRICE --> <button class="btn text-danger" onclick="action_item_remove('%');" aria-label="remove item"> X </button> </div>
            </div>
        </div>

        <div id="footer">
            <div class="text-center text-lg-start bg-body-tertiary text-muted">
                <div class="text-center p-4">
                    © 2025 Copyright František Slivko
                </div>
            </div>
        </div>

        <div id="navbar">
            <div class="navbar sticky-top bg-body-tertiary">
                <div class="container-fluid">
                    <p class="navbar-brand fs-1 pb-0 mb-0" href="">
                        % <!-- title -->
                    </p>
                    <!-- class="navbar-toggler" -->
                    <button id="basket-modal-btn" class="btn border-0 d-flex flex-row" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal">
                        <span class="pe-1 fs-5">
                            %€ <!-- price -->
                        </span>
                        % <!--  basket card icon  -->
                    </button>
        </div> </div> </div>

        <div id="basket-modal">
            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5">Basket</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            % <!-- ITEMS -->
                        </div>
                        <div class="modal-footer">
                            <div class="container">
                                %
                                <div>Tax is %€</div>
                                <div class="d-flex justify-content-between">
                                    <div class="align-items-center">
                                        Total is %€
                                    </div>
                                    <div>
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        % <!-- Checkout btn -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="items-container">
<!--            <div class="container p-2 mx-auto d-inline-flex justify-content-center w-auto">-->
            <div class="container p-2">
                %
            </div>
        </div>

        <div id="items-item-buy-btn">
            <button class="btn btn-primary w-100" onclick="action_item_buy('%')">Add to card</button>
        </div>

        <div id="items-item-buy-modify">
            <div class="input-group me-3 ms-3 w-auto">
                <span class="input-group-text2" style="display: flex; align-items: center">quantity</span>
                <button class="input-group-text btn focus-ring" onclick="if (document.getElementById('qty_mod_%').value > 1) { document.getElementById('qty_mod_%').value -= 1; action_item_update('%', parseInt(document.getElementById('qty_mod_%').value)); } else action_item_remove('%');">-</button>
                <input id="qty_mod_%" type="number" class="form-control input-number-hide-arrows" aria-label="quantity" value="1" min="1" onchange="if(this.value<1) action_item_remove('%'); else action_item_update('%', parseInt(this.value));">
                <button class="input-group-text btn focus-ring" onclick="document.getElementById('qty_mod_%').value = 1 + parseInt(document.getElementById('qty_mod_%').value); action_item_update('%', parseInt(document.getElementById('qty_mod_%').value));">+</button>
            </div>
        </div>

        <div id="shop-title">
            <header>
                <div class="d-flex justify-content-center">
                    <h1> Buy snacks for an entire day for a lonely cat </h1>
                </div>
            </header>
        </div>

        <div id="items-item">
            <div class="card col-4 p-1 m-3" style="width: 18rem;">
                <img src="%" class="card-img-top" alt="">
                <div class="card-body">
                    <h5 class="card-title">%</h5>
                    <p class="card-text">%</p>
                    <p class="card-footer">%€</p>
                    <div class="w-auto text-center">
                        %
                    </div>
                </div>
            </div>
        </div>

        <!-- PREVIEW PAGE COMPONENTS -->
        <div id="preview-nav">
            <div>
                <button class="btn text-opacity-100 fw-bold border-0 p-0" onclick="action_preview_back();"> <span class="h1">←</span> </button>
            </div>
        </div>

        <div id="preview-payment-btn">
            <div><button class="btn btn-primary w-auto" onclick="action_preview_to_payment();"> proceed to payment </button></div>
        </div>

        <div id="preview-table-holder">
            <div class="ps-3 pe-3 w-100">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th scope="col">Item</th>
                            <th scope="col">Description</th>
                            <th scope="col">Quantity</th>
                            <th scope="col">Price</th>
                        </tr>
                    </thead>
                    <tbody class="table-group-divider">
                    <!-- % -->
                    </tbody>

                </table>
            </div>
        </div>

        <table id="preview-table-item" skip="tbody">
            <tbody>
                <tr>
<!--                    <th scope="row"> </th>-->
                    <td>%</td>
                    <td>%</td>
                    <td>%</td>
                    <td>%€</td>
                </tr>
            </tbody>
        </table>

        <!-- PAYMENT PAGE COMPONENTS -->
        <div id="payment-nav">
            <div>
                <button class="btn text-opacity-100 fw-bold border-0 p-0" onclick="action_payment_back();"> <span class="h1">←</span> </button>
            </div>
        </div>


        <div id="payment-contactform">
            <div class="container" style="max-width: 800px">
                <!-- SOURCE for js calling on form submit: https://stackoverflow.com/questions/10520899/form-action-with-javascript -->
                <form id="contactForm" class="w-auto" action="javascript:action_payment_proceed_trigger();" onsubmit="return action_payment_submit(this);">
                    <div class="form-text">
                        <h2 class="fs-3"> Payment information </h2>
                    </div>
                    <!-- CARDHOLDER'S NAME; CARD NUMBER; EXPIRY DATE; CVV; total = X -->

                    <div class="form-floating mb-3">
                        <input class="form-control" id="form-card-name" oninput="form_validate_cardname(this)" required type="text" placeholder="cardholder's name">
                        <label for="form-card-name">cardholder's name</label>
                        <div class="invalid-tooltip">
                            Doesn't look like a name.
                        </div>
                    </div>

                    <div class="form-floating mb-3">
                        <input class="form-control input-number-hide-arrows" id="form-card-number" autocomplete="cc-number" oninput="form_validate_cardnumber(this)" required type="text" maxlength="19" placeholder="xxxx xxxx xxxx xxxx">
                        <label for="form-card-number">card number</label>
                    </div>

                    <div class="input-group mb-3">
                        <div class="form-floating me-2">
                            <input class="form-control input-number-hide-arrows" id="form-card-expiry" inputmode="numerical" maxlength="5" oninput="form_validate_cardexire(this)" required placeholder="123">
                            <label for="form-card-expiry">expiry date</label>
                            <div class="invalid-tooltip">
                                Invalid expiry date. Use format MM/YY.
                            </div>
                        </div>
                        <div class="form-floating">
                            <input class="form-control input-number-hide-arrows" id="form-card-cvv" type="number" minlength="3" oninput="form_validate_cardcvv(this)" required placeholder="123">
                            <label for="form-card-cvv">CVV</label>
                            <div class="invalid-tooltip">
                                Invalid CVV.
                            </div>
                        </div>
                    </div>

                    <div class="form-text">
                        <h2 class="fs-3"> Contact information </h2>
                    </div>

                    <div class="form-floating mb-3">
                        <input class="form-control" id="form-name-surname" oninput="form_validate_name_and_surname(this)" required type="text" placeholder="Name and Surname" />
                        <label for="form-name-surname">Name and Surname</label>
                        <div class="invalid-tooltip">
                            Invalid or empty name and surname.
                        </div>
                    </div>

                    <div class="form-floating mb-3">
                        <input class="form-control" id="form-email" type="email" oninput="form_validate_email(this);" required placeholder="Email Address" />
                        <label for="form-email">Email Address</label>
                        <div class="invalid-tooltip">
                            Invalid or empty email.
                        </div>
                    </div>

                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" checked id="form-newsletter">
                        <label class="form-check-label" for="form-newsletter">
                            Subscribe to newsletter
                        </label>
                    </div>

                    <div class="form-floating mb-3">
                        <textarea class="form-control" id="message" type="text" placeholder="Message" style="height: 10rem;" ></textarea>
                        <label for="message">Message</label>
                    </div>

                    <div class="d-grid">
                        <button class="btn btn-primary btn-lg" id="submitButton" type="submit">Pay and finish order</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="payment-wait-modal">
            <!-- Modal -->
            <div class="modal fade" id="paymentWaitModal" tabindex="-1" aria-labelledby="paymentWaitModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5" id="paymentWaitModalLabel">Processing payment</h1>
                    </div>
                    <div class="modal-body">
                        <div class="d-flex justify-content-center">
                            <div class="spinner-border" role="status" style="width: 4rem; height: 4rem;">
                                <span class="visually-hidden">Processing...</span>
                            </div>
                        </div>
                    </div>
                </div>
              </div>
            </div>
        </div>

        <!-- THANKS PAGE COMPONENTS -->
        <div id="thanks-page">
            <h2> thanks for bringing joy to the life of unfortunate cats </h2>
            <div class="d-flex align-items-center">
                <button class="btn btn-primary" onclick="action_thanks_back_to_shop();">back to shop</button>
            </div>

        </div>

    </template>

    <div style="display: flex; flex-direction: column; min-height: 100vh">
        <div>
            <nav id="nav" class="sticky-top">
            </nav>

            <main id="body" class="">
            </main>
        </div>

        <div class="flex-grow-1 invisible"></div>
    </div>
    <footer id="foot" class="">

    </footer>

    <script src="js/scripts.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</body>
</html>